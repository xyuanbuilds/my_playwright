# Monitor ç½‘ç«™è‡ªåŠ¨åŒ–æ£€æµ‹å·¥å…·

è¿™æ˜¯ä¸€ä¸ªåŸºäº Playwright çš„é€šç”¨ç½‘ç«™è‡ªåŠ¨åŒ–æ£€æµ‹å·¥å…·ï¼Œæ”¯æŒäº¤äº’å¼å‘½ä»¤è¡Œè¾“å…¥ç½‘å€ã€æ‰¹é‡æ£€æµ‹ã€æ€§èƒ½æŒ‡æ ‡æ”¶é›†ã€èµ„æºå®Œæ•´æ€§æ£€æŸ¥å’Œè‡ªåŠ¨æˆªå›¾ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **äº¤äº’å¼å‘½ä»¤è¡Œ**ï¼šå‹å¥½çš„å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ï¼Œæ”¯æŒé€ä¸ªæ·»åŠ ç½‘å€
- **æ‰¹é‡æ£€æµ‹**ï¼šä¸€æ¬¡æ€§æ£€æµ‹å¤šä¸ªç½‘å€ï¼Œè‡ªåŠ¨ç”Ÿæˆæ±‡æ€»æŠ¥å‘Š
- **æ€§èƒ½æŒ‡æ ‡æ”¶é›†**ï¼š
  - é¡µé¢åŠ è½½æ—¶é—´ï¼ˆDOMContentLoadedã€Load Completeï¼‰
  - é¦–å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰
  - é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰
  - æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰
  - ç½‘ç»œè¯·æ±‚ç»Ÿè®¡
- **èµ„æºå®Œæ•´æ€§æ£€æŸ¥**ï¼š
  - æ£€æŸ¥æ‰€æœ‰èµ„æºåŠ è½½çŠ¶æ€ï¼ˆå›¾ç‰‡ã€CSSã€JSã€å­—ä½“ç­‰ï¼‰
  - ç»Ÿè®¡å„ç±»å‹èµ„æºæ•°é‡
  - è®°å½•å¤±è´¥çš„èµ„æº
- **è‡ªåŠ¨æˆªå›¾**ï¼šå…¨å±æˆªå›¾ï¼ŒæŒ‰æ—¥æœŸç»„ç»‡
- **ç»“æ„åŒ–æŠ¥å‘Š**ï¼šJSON æ ¼å¼æŠ¥å‘Šï¼Œæ˜“äºè§£æå’Œåˆ†æ
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ£€æµ‹å¤±è´¥ä¸å½±å“æ•´ä½“æµç¨‹
- **è§†å£é…ç½®**ï¼šæ”¯æŒ PCã€ç§»åŠ¨ç«¯ç­‰å¤šç§è§†å£é…ç½®

## ç›®å½•ç»“æ„

```
/Users/xy/Dev/my_playwright/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ monitor/                        # ç›‘æµ‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ interactive-cli.ts          # äº¤äº’å¼å…¥å£
â”‚   â”‚   â”œâ”€â”€ detector.ts                 # æ ¸å¿ƒæ£€æµ‹é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ config-loader.ts            # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ performance-collector.ts    # æ€§èƒ½æŒ‡æ ‡æ”¶é›†
â”‚   â”‚   â”œâ”€â”€ resource-checker.ts         # èµ„æºå®Œæ•´æ€§æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ screenshot-manager.ts       # æˆªå›¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ report-generator.ts         # æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ types.ts                    # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/                          # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ date-helper.ts              # æ—¥æœŸæ ¼å¼åŒ–
â”‚       â””â”€â”€ file-helper.ts              # æ–‡ä»¶æ“ä½œ
â”œâ”€â”€ monitor.config.json                 # é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ detection-records/                  # æ£€æµ‹è®°å½•ï¼ˆæŒ‰æ—¥æœŸï¼‰
â”‚   â””â”€â”€ YYYY-MM-DD/
â”‚       â”œâ”€â”€ HHmmss-domain.json          # å•ä¸ªç½‘å€æ£€æµ‹ç»“æœ
â”‚       â”œâ”€â”€ HHmmss-batch-summary.json   # æ‰¹é‡æ£€æµ‹æ±‡æ€»
â”‚       â””â”€â”€ index.json                  # å½“æ—¥æ£€æµ‹ç´¢å¼•
â””â”€â”€ detection-screenshots/              # æ£€æµ‹æˆªå›¾ï¼ˆæŒ‰æ—¥æœŸï¼‰
    â””â”€â”€ YYYY-MM-DD/
        â””â”€â”€ HHmmss-domain.png           # æˆªå›¾æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œæ£€æµ‹å·¥å…·

```bash
pnpm run monitor
```

### 2. ä½¿ç”¨æµç¨‹

1. å·¥å…·å¯åŠ¨åï¼Œä¼šæç¤ºæ‚¨è¾“å…¥ç½‘å€
2. è¾“å…¥å®Œæ•´çš„ç½‘å€ï¼ˆåŒ…æ‹¬ http:// æˆ– https://ï¼‰
3. æŒ‰å›è½¦æ·»åŠ ï¼Œç»§ç»­è¾“å…¥ä¸‹ä¸€ä¸ªç½‘å€
4. è¾“å…¥ç©ºè¡Œï¼ˆç›´æ¥æŒ‰å›è½¦ï¼‰å®Œæˆæ·»åŠ 
5. ç¡®è®¤æ˜¯å¦å¼€å§‹æ£€æµ‹
6. ç­‰å¾…æ£€æµ‹å®Œæˆï¼ŒæŸ¥çœ‹ç»“æœ

### 3. ç¤ºä¾‹

```
æ¬¢è¿ä½¿ç”¨ç½‘ç«™æ£€æµ‹å·¥å…·
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å½“å‰è§†å£: ğŸ–¥ï¸  æ¡Œé¢ (1920x1080)

è¯·è¾“å…¥è¦æ£€æµ‹çš„ç½‘å€ï¼ˆè¾“å…¥ç©ºè¡Œå®Œæˆæ·»åŠ ï¼‰:
> https://example.com
âœ“ å·²æ·»åŠ : https://example.com

è¯·è¾“å…¥è¦æ£€æµ‹çš„ç½‘å€ï¼ˆè¾“å…¥ç©ºè¡Œå®Œæˆæ·»åŠ ï¼‰:
> https://github.com
âœ“ å·²æ·»åŠ : https://github.com

è¯·è¾“å…¥è¦æ£€æµ‹çš„ç½‘å€ï¼ˆè¾“å…¥ç©ºè¡Œå®Œæˆæ·»åŠ ï¼‰:
> [Enter ç©ºè¡Œ]

å¾…æ£€æµ‹ç½‘å€åˆ—è¡¨ (2ä¸ª):
  1. https://example.com
  2. https://github.com

æ˜¯å¦å¼€å§‹æ£€æµ‹? (Y/n) > Y

å¼€å§‹æ£€æµ‹...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[1/2] âœ“ https://example.com (1234ms)
[2/2] âœ“ https://github.com (2345ms)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ£€æµ‹å®Œæˆï¼

æŠ¥å‘Šè·¯å¾„: detection-records/2026-01-26/
æ±‡æ€»æŠ¥å‘Š: 143052-batch-summary.json

ç»Ÿè®¡ä¿¡æ¯:
  æ€»è®¡: 2 ä¸ªç½‘å€
  æˆåŠŸ: 2 ä¸ª
  å¹³å‡åŠ è½½æ—¶é—´: 1789ms
  æœ€å¿«: https://example.com
  æœ€æ…¢: https://github.com
```

## æŠ¥å‘Šæ ¼å¼

### å•ä¸ªç½‘å€æ£€æµ‹ç»“æœ

æ–‡ä»¶åï¼š`HHmmss-domain.json`

```json
{
  "url": "https://example.com",
  "timestamp": "2026-01-26T14:30:52.123Z",
  "detectionTime": "143052",
  "status": "success",
  "httpStatus": 200,
  "loadTime": 2345,
  "viewport": {
    "width": 1920,
    "height": 1080,
    "isMobile": false
  },
  "performanceMetrics": {
    "navigationStart": 0,
    "domContentLoaded": 1234,
    "loadComplete": 2345,
    "timeToFirstByte": 156,
    "firstContentfulPaint": 890,
    "largestContentfulPaint": 1456,
    "totalRequests": 45,
    "totalSize": 1234567,
    "totalLoadTime": 2345
  },
  "resourceCheck": {
    "totalResources": 45,
    "failedResources": [],
    "resourcesByType": {
      "image": 12,
      "stylesheet": 5,
      "script": 18,
      "font": 3,
      "xhr": 5,
      "other": 2
    },
    "allResourcesLoaded": true
  },
  "screenshotPath": "detection-screenshots/2026-01-26/143052-example.com.png"
}
```

### æ‰¹é‡æ£€æµ‹æ±‡æ€»æŠ¥å‘Š

æ–‡ä»¶åï¼š`HHmmss-batch-summary.json`

```json
{
  "batchId": "batch-20260126-143052",
  "timestamp": "2026-01-26T14:30:52.123Z",
  "totalUrls": 2,
  "successCount": 2,
  "failedCount": 0,
  "totalDetectionTime": 5678,
  "results": [
    {
      "url": "https://example.com",
      "status": "success",
      "loadTime": 2345,
      "httpStatus": 200,
      "detailPath": "detection-records/2026-01-26/143052-example.com.json"
    }
  ],
  "summary": {
    "averageLoadTime": 1789.5,
    "fastestUrl": "https://example.com",
    "slowestUrl": "https://github.com",
    "totalResourcesChecked": 90,
    "totalFailedResources": 0
  }
}
```

## é…ç½®è¯´æ˜

Monitor å·¥å…·æ”¯æŒé€šè¿‡ `monitor.config.json` é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æ£€æµ‹è¡Œä¸ºã€‚

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒï¼š

### ğŸ“‹ é…ç½®æŒ‡å—

- **[è§†å£é…ç½®è¯¦è§£](../config/viewport-config.md)** - PCã€ç§»åŠ¨ç«¯ã€è‡ªå®šä¹‰å°ºå¯¸
- **[Monitor å·¥å…·é…ç½®](../config/monitor-config.md)** - æµè§ˆå™¨è¡Œä¸ºã€è¶…æ—¶ç­‰

### å¿«é€Ÿé…ç½®ç¤ºä¾‹

**PC è§†å£ï¼ˆé»˜è®¤ï¼‰**ï¼š
```json
{
  "viewport": {
    "width": 1920,
    "height": 1080
  }
}
```

**ç§»åŠ¨ç«¯è§†å£ï¼ˆiPhone 12ï¼‰**ï¼š
```json
{
  "viewport": {
    "width": 390,
    "height": 844,
    "deviceScaleFactor": 3,
    "isMobile": true,
    "hasTouch": true
  }
}
```

### é»˜è®¤é…ç½®

å¦‚æœæ²¡æœ‰ `monitor.config.json` æ–‡ä»¶ï¼Œå·¥å…·ä¼šä½¿ç”¨ä»¥ä¸‹é»˜è®¤é…ç½®ï¼š
- **è§†å£**ï¼šPC è§†å£ (1920x1080)
- **è¶…æ—¶æ—¶é—´**ï¼š30 ç§’
- **ç­‰å¾…æ¡ä»¶**ï¼šnetworkidleï¼ˆç½‘ç»œç©ºé—²ï¼‰
- **æˆªå›¾æ¨¡å¼**ï¼šå…¨å±æˆªå›¾
- **å¹¶å‘æ¨¡å¼**ï¼šä¸²è¡Œæ‰§è¡Œï¼ˆæ‰¹é‡æ£€æµ‹æ—¶é€ä¸ªè¿›è¡Œï¼‰

## æ³¨æ„äº‹é¡¹

1. **ç½‘å€æ ¼å¼**ï¼šå¿…é¡»åŒ…å«åè®®ï¼ˆhttp:// æˆ– https://ï¼‰
2. **è¶…æ—¶å¤„ç†**ï¼šå•ä¸ªç½‘å€æ£€æµ‹è¶…æ—¶ä¸å½±å“å…¶ä»–ç½‘å€
3. **èµ„æºæ£€æµ‹**ï¼šä½¿ç”¨ Performance APIï¼Œå¯èƒ½æ— æ³•æ•è·æ‰€æœ‰å¤±è´¥èµ„æº
4. **æˆªå›¾å¤±è´¥**ï¼šæˆªå›¾å¤±è´¥ä¸å½±å“å…¶ä»–æ•°æ®æ”¶é›†
5. **å­˜å‚¨ç©ºé—´**ï¼šæˆªå›¾æ–‡ä»¶å¯èƒ½è¾ƒå¤§ï¼Œæ³¨æ„ç£ç›˜ç©ºé—´

## æ•…éšœæ’æŸ¥

### æ£€æµ‹å¤±è´¥

å¦‚æœæŸä¸ªç½‘å€æ£€æµ‹å¤±è´¥ï¼ŒæŠ¥å‘Šä¸­ä¼šåŒ…å«é”™è¯¯ä¿¡æ¯ï¼š
- `navigation`: ç½‘ç»œé”™è¯¯æˆ–é¡µé¢æ— æ³•è®¿é—®
- `timeout`: è¶…æ—¶é”™è¯¯
- `ssl`: SSL è¯ä¹¦é”™è¯¯
- `unknown`: æœªçŸ¥é”™è¯¯

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

æ£€æµ‹è¿‡ç¨‹ä¸­çš„è­¦å‘Šå’Œé”™è¯¯ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

## æ‰©å±•å»ºè®®

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•å·¥å…·ï¼š

1. **å¤šæ ¼å¼æŠ¥å‘Š**ï¼šæ”¯æŒå¯¼å‡º CSVã€HTMLã€Markdown æ ¼å¼
2. **å®šæ—¶ä»»åŠ¡**ï¼šé›†æˆ cron å®ç°å®šæ—¶æ£€æµ‹
3. **æ•°æ®å¯è§†åŒ–**ï¼šç”Ÿæˆæ€§èƒ½è¶‹åŠ¿å›¾è¡¨
4. **è‡ªå®šä¹‰æ£€æµ‹è§„åˆ™**ï¼šæ”¯æŒè‡ªå®šä¹‰æ–­è¨€å’Œæ£€æµ‹é€»è¾‘
5. **é€šçŸ¥åŠŸèƒ½**ï¼šæ£€æµ‹å®Œæˆåå‘é€é‚®ä»¶æˆ–æ¶ˆæ¯é€šçŸ¥

## æŠ€æœ¯æ ˆ

- Playwright 1.58.0 - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- @inquirer/prompts 8.0.0 - äº¤äº’å¼å‘½ä»¤è¡Œ
- chalk 5.6.2 - ç»ˆç«¯å½©è‰²è¾“å‡º
- TypeScript 5.x - ç±»å‹å®‰å…¨
- Node.js 20+ - è¿è¡Œç¯å¢ƒ

## ç›¸å…³æ–‡æ¡£

- [è§†å£é…ç½®æŒ‡å—](../config/viewport-config.md)
- [Monitor å®Œæ•´é…ç½®](../config/monitor-config.md)
- [é¡¹ç›®æ–‡æ¡£ä¸­å¿ƒ](../README.md)
- [é¡¹ç›®è§„èŒƒ](../../DOCS_ORGANIZATION.md)

---

**æœ€åæ›´æ–°**: 2026-01-26
**ç»´æŠ¤è€…**: é¡¹ç›®å›¢é˜Ÿ
